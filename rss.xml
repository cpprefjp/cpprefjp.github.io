<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>cpprefjp - C++日本語リファレンス</title>
  <link href="http://cpprefjp.github.io" />
  <updated>2015-10-21T00:08:00.982711</updated>
  <id>24a59a13-b867-4552-9b14-90e70055c24d</id>

  
    <entry>
      <title>push_back -- vector::push_back : 効果を記載</title>
      <link href="http://cpprefjp.github.io/reference/vector/push_back.html"/>
      <id>30797a6b165a54e6e678f71a4c314bb829e2f56a:reference/vector/push_back.md</id>
      <updated>2015-10-20 23:29:34 +0900</updated>
      
        <content type="html">&lt;div class=&#34;identifier-type&#34;&gt;function&lt;/div&gt;&lt;div class=&#34;header&#34;&gt;&amp;lt;vector&amp;gt;&lt;/div&gt;&lt;h1 itemprop=&#34;name&#34;&gt;&lt;span class=&#34;namespace&#34; title=&#34;namespace std&#34;&gt;std::&lt;/span&gt;&lt;span class=&#34;class&#34; title=&#34;class vector&#34;&gt;vector::&lt;/span&gt;push_back&lt;/h1&gt;
&lt;div itemprop=&#34;articleBody&#34;&gt;&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;push_back&lt;/span&gt;(&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;const&lt;/span&gt; T&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; x); &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// (1)&lt;/span&gt;
&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;push_back&lt;/span&gt;(T&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; x);      &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// (2) C++11&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h2&gt;概要&lt;/h2&gt;
&lt;p&gt;新たな要素を末尾に追加する。&lt;/p&gt;
&lt;h2&gt;効果&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;(1) : &lt;code&gt;x&lt;/code&gt;のコピーを、末尾に追加する。&lt;/li&gt;
&lt;li&gt;(2) : 一時オブジェクト&lt;code&gt;x&lt;/code&gt;をムーブして、末尾に追加する。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;戻り値&lt;/h2&gt;
&lt;p&gt;なし&lt;/p&gt;
&lt;h2&gt;計算量&lt;/h2&gt;
&lt;p&gt;償却定数時間。&lt;/p&gt;
&lt;p&gt;この関数を呼び出す前に&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;であった場合、この関数の実行は定数時間で行われる。そうでない場合は、メモリ領域の再確保と、その領域への要素のコピーもしくはムーブが行われるため、線形時間で実行される。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vector&lt;/code&gt;の実装で行われるメモリ確保戦略では、再確保の際にそれら要素がぴったり収まるサイズを確保するのではなく、少し多めの1.5倍や2倍といったサイズのメモリを確保し、再確保の回数を減らしている。事前に追加する要素の数がわかっている場合には&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/reserve.html&#34;&gt;&lt;code&gt;reserve()&lt;/code&gt;&lt;/a&gt;メンバ関数で事前にその要素数分のメモリを確保し、そうでない場合には&lt;code&gt;vector&lt;/code&gt;のメモリ確保戦略に任せるのがよいだろう。&lt;/p&gt;
&lt;h2&gt;備考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;要素を追加した後の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt;が要素を追加する前の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;よりも大きい場合は領域の再確保が生じる。領域の再確保が生じなかった場合には全てのイテレータや参照は有効である。&lt;/li&gt;
&lt;li&gt;非CopyInsertableな要素型&lt;code&gt;T&lt;/code&gt;のムーブコンストラクタ以外で例外が発生した場合、副作用は発生しない。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;例&lt;/h2&gt;
&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;string&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;algorithm&amp;gt;&lt;/span&gt;

&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;main&lt;/span&gt;()
{
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;vector&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt; v;

  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// const&amp;amp;バージョン&lt;/span&gt;
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string s &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;hello&#34;&lt;/span&gt;;
  v.&lt;span style=&#34;color:#ff0000&#34;&gt;push_back&lt;/span&gt;(s);

  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// &amp;amp;&amp;amp;バージョン&lt;/span&gt;
  v.&lt;span style=&#34;color:#ff0000&#34;&gt;push_back&lt;/span&gt;(std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string(&lt;span style=&#34;color: #BA2121&#34;&gt;&#34;world&#34;&lt;/span&gt;));

  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;for_each(v.begin(), v.end(), [](&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;const&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; x) {
    std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;cout &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; x &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;endl;
  });
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h3&gt;出力&lt;/h3&gt;
&lt;p&gt;&lt;pre&gt;&lt;code&gt;hello
world
&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;参照&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kmonos.net/wlog/111.html#_2334100705&#34; target=&#34;_blank&#34;&gt;２倍だけじゃない - Derive Your Dreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kmonos.net/wlog/111.html#_1001100720&#34; target=&#34;_blank&#34;&gt;それでも２倍だ - Derive Your Dreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2252&#34; target=&#34;_blank&#34;&gt;LWG Issue 2252. Strong guarantee on &lt;code&gt;vector::push_back()&lt;/code&gt; still broken with C++11?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;C++03では、「&lt;code&gt;vector&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt;、&lt;code&gt;deque&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt;と&lt;code&gt;push_front()&lt;/code&gt;で例外が発生した場合、副作用が発生しない」という強い保証があった。&lt;/li&gt;
&lt;li&gt;C++11では、ムーブ対応のため文面が見直されたが、その際に&lt;code&gt;insert()&lt;/code&gt; &lt;code&gt;emplace()&lt;/code&gt;とまとめて以下のような仕様となった：&lt;ul&gt;
&lt;li&gt;「(挿入操作において、)要素型 T のコピーコンストラクタ、ムーブコンストラクタ、代入演算子、ムーブ代入演算子、あるいはInputIteratorの操作以外で例外が発生した場合、副作用が発生しない。」&lt;/li&gt;
&lt;li&gt;このため、コピーコンストラクタで例外が発生した場合が保証の範囲外となり、保証が弱まってしまっていた。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;C++14では、上記文面を見直し、終端（&lt;code&gt;deque&lt;/code&gt;の場合は両端）への単一要素の追加の場合に限りC++03と同等の強い保証を提供するよう修正された。&lt;/li&gt;
&lt;li&gt;それに加えて、C++14ではこの強い保証を提供する関数を、以下のように拡大した：&lt;ul&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt; (C++03から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/emplace_back.html&#34;&gt;&lt;code&gt;emplace_back()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の終端へ単一要素を挿入する&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/insert.html&#34;&gt;&lt;code&gt;insert()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/emplace.html&#34;&gt;&lt;code&gt;emplace()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/push_back.html&#34;&gt;&lt;code&gt;push_back()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/push_front.html&#34;&gt;&lt;code&gt;push_front()&lt;/code&gt;&lt;/a&gt; (C++03から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace_back.html&#34;&gt;&lt;code&gt;emplace_back()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace_front.html&#34;&gt;&lt;code&gt;emplace_front()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の両端へ単一要素を挿入する&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/insert.html&#34;&gt;&lt;code&gt;insert()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace.html&#34;&gt;&lt;code&gt;emplace()&lt;/code&gt;&lt;/a&gt; (C++14)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</content>
      
      <author>
        <name>Akira Takahashi</name>
        <email>faithandbrave@gmail.com</email>
      </author>
    </entry>
  
    <entry>
      <title>emplace_back -- vector::emplace_back : push_backと同様に、計算量を考慮した使い方を記載</title>
      <link href="http://cpprefjp.github.io/reference/vector/emplace_back.html"/>
      <id>423559c1e625f61382d9f56733bcbdbe83fc3e61:reference/vector/emplace_back.md</id>
      <updated>2015-10-20 23:24:36 +0900</updated>
      
        <content type="html">&lt;div class=&#34;identifier-type&#34;&gt;function&lt;/div&gt;&lt;div class=&#34;header&#34;&gt;&amp;lt;vector&amp;gt;&lt;/div&gt;&lt;h1 itemprop=&#34;name&#34;&gt;&lt;span class=&#34;namespace&#34; title=&#34;namespace std&#34;&gt;std::&lt;/span&gt;&lt;span class=&#34;class&#34; title=&#34;class vector&#34;&gt;vector::&lt;/span&gt;emplace_back&lt;span class=&#34;cpp cpp11&#34; title=&#34;C++11で追加&#34;&gt;(C++11)&lt;/span&gt;&lt;/h1&gt;
&lt;div itemprop=&#34;articleBody&#34;&gt;&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;template&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;class... Args&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; emplace_back(Args&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;... args);

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;template&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;class... Args&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; vector&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;bool&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;::&lt;/span&gt;emplace_back(Args&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;... args); &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// C++14&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h2&gt;概要&lt;/h2&gt;
&lt;p&gt;直接構築で新たな要素を末尾に追加する。&lt;/p&gt;
&lt;p&gt;この関数の引数&lt;code&gt;args...&lt;/code&gt;は、要素型Tのコンストラクタ引数である。当関数の内部で要素型&lt;code&gt;T&lt;/code&gt;のコンストラクタを呼び出し、追加する要素を構築する。&lt;/p&gt;
&lt;h2&gt;戻り値&lt;/h2&gt;
&lt;p&gt;なし&lt;/p&gt;
&lt;h2&gt;計算量&lt;/h2&gt;
&lt;p&gt;償却定数時間。&lt;/p&gt;
&lt;p&gt;この関数を呼び出す前に&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;であった場合、この関数の実行は定数時間で行われる。そうでない場合は、メモリ領域の再確保と、その領域への要素のコピーもしくはムーブが行われるため、線形時間で実行される。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vector&lt;/code&gt;の実装で行われるメモリ確保戦略では、再確保の際にそれら要素がぴったり収まるサイズを確保するのではなく、少し多めの1.5倍や2倍といったサイズのメモリを確保し、再確保の回数を減らしている。事前に追加する要素の数がわかっている場合には&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/reserve.html&#34;&gt;&lt;code&gt;reserve()&lt;/code&gt;&lt;/a&gt;メンバ関数で事前にその要素数分のメモリを確保し、そうでない場合には&lt;code&gt;vector&lt;/code&gt;のメモリ確保戦略に任せるのがよいだろう。&lt;/p&gt;
&lt;h2&gt;備考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;再確保の可能性、イテレータの有効性への影響、例外発生時に副作用が発生しない保証はいずれも&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/push_back.html&#34;&gt;&lt;code&gt;push_back()&lt;/code&gt;&lt;/a&gt;と同様。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;例&lt;/h2&gt;
&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;utility&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;string&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;algorithm&amp;gt;&lt;/span&gt;

&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;main&lt;/span&gt;()
{
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;vector&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;pair&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt;, std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; v;

  v.&lt;span style=&#34;color:#ff0000&#34;&gt;emplace_back&lt;/span&gt;(&lt;span style=&#34;color: #666666&#34;&gt;3&lt;/span&gt;, std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string(&lt;span style=&#34;color: #BA2121&#34;&gt;&#34;hello&#34;&lt;/span&gt;));
  v.push_back(std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;make_pair(&lt;span style=&#34;color: #666666&#34;&gt;1&lt;/span&gt;, std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string(&lt;span style=&#34;color: #BA2121&#34;&gt;&#34;world&#34;&lt;/span&gt;)));

  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;for_each(v.begin(), v.end(), [](decltype(v)&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;const_reference x) {
    std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;cout &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; x.first &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&#39;,&#39;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; x.second &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;endl;
  });
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h3&gt;出力&lt;/h3&gt;
&lt;p&gt;&lt;pre&gt;&lt;code&gt;3,hello
1,world
&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;バージョン&lt;/h2&gt;
&lt;h3&gt;言語&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;C++11&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;処理系&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#clang&#34;&gt;Clang&lt;/a&gt;: ??&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#gcc&#34;&gt;GCC&lt;/a&gt;: &lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#gcc&#34;&gt;GCC, C++11 mode&lt;/a&gt;: 4.7.0&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#icc&#34;&gt;ICC&lt;/a&gt;: ??&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#visual_cpp&#34;&gt;Visual C++&lt;/a&gt;: 12.0&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参照&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2680.pdf&#34; target=&#34;_blank&#34;&gt;N2680 Proposed Wording for Placement Insert (Revision 1)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2187&#34; target=&#34;_blank&#34;&gt;LWG Issue 2187. &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt; is missing emplace and &lt;code&gt;emplace_back&lt;/code&gt; member functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2252&#34; target=&#34;_blank&#34;&gt;LWG Issue 2252. Strong guarantee on &lt;code&gt;vector::push_back()&lt;/code&gt; still broken with C++11?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;経緯の説明は、&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/push_back.html&#34;&gt;&lt;code&gt;vector::push_back()&lt;/code&gt;&lt;/a&gt;ページを参照。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</content>
      
      <author>
        <name>Akira Takahashi</name>
        <email>faithandbrave@gmail.com</email>
      </author>
    </entry>
  
    <entry>
      <title>push_back -- 表記統一 : 文章中の関数名の表記に、丸カッコをつけた</title>
      <link href="http://cpprefjp.github.io/reference/vector/push_back.html"/>
      <id>5070571f6b5780dd60b9d5a91c72fc18bd804409:reference/vector/push_back.md</id>
      <updated>2015-10-20 23:22:39 +0900</updated>
      
        <content type="html">&lt;div class=&#34;identifier-type&#34;&gt;function&lt;/div&gt;&lt;div class=&#34;header&#34;&gt;&amp;lt;vector&amp;gt;&lt;/div&gt;&lt;h1 itemprop=&#34;name&#34;&gt;&lt;span class=&#34;namespace&#34; title=&#34;namespace std&#34;&gt;std::&lt;/span&gt;&lt;span class=&#34;class&#34; title=&#34;class vector&#34;&gt;vector::&lt;/span&gt;push_back&lt;/h1&gt;
&lt;div itemprop=&#34;articleBody&#34;&gt;&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;push_back&lt;/span&gt;(&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;const&lt;/span&gt; T&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; x); &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// (1)&lt;/span&gt;
&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;push_back&lt;/span&gt;(T&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; x);      &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// (2) C++11&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h2&gt;概要&lt;/h2&gt;
&lt;p&gt;新たな要素を末尾に追加する。&lt;/p&gt;
&lt;h2&gt;戻り値&lt;/h2&gt;
&lt;p&gt;なし&lt;/p&gt;
&lt;h2&gt;計算量&lt;/h2&gt;
&lt;p&gt;償却定数時間。&lt;/p&gt;
&lt;p&gt;この関数を呼び出す前に&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;であった場合、この関数の実行は定数時間で行われる。そうでない場合は、メモリ領域の再確保と、その領域への要素のコピーもしくはムーブが行われるため、線形時間で実行される。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vector&lt;/code&gt;の実装で行われるメモリ確保戦略では、再確保の際にそれら要素がぴったり収まるサイズを確保するのではなく、少し多めの1.5倍や2倍といったサイズのメモリを確保し、再確保の回数を減らしている。事前に追加する要素の数がわかっている場合には&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/reserve.html&#34;&gt;&lt;code&gt;reserve()&lt;/code&gt;&lt;/a&gt;メンバ関数で事前にその要素数分のメモリを確保し、そうでない場合には&lt;code&gt;vector&lt;/code&gt;のメモリ確保戦略に任せるのがよいだろう。&lt;/p&gt;
&lt;h2&gt;備考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;要素を追加した後の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt;が要素を追加する前の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;よりも大きい場合は領域の再確保が生じる。領域の再確保が生じなかった場合には全てのイテレータや参照は有効である。&lt;/li&gt;
&lt;li&gt;非CopyInsertableな要素型&lt;code&gt;T&lt;/code&gt;のムーブコンストラクタ以外で例外が発生した場合、副作用は発生しない。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;例&lt;/h2&gt;
&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;string&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;algorithm&amp;gt;&lt;/span&gt;

&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;main&lt;/span&gt;()
{
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;vector&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt; v;

  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// const&amp;amp;バージョン&lt;/span&gt;
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string s &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;hello&#34;&lt;/span&gt;;
  v.&lt;span style=&#34;color:#ff0000&#34;&gt;push_back&lt;/span&gt;(s);

  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// &amp;amp;&amp;amp;バージョン&lt;/span&gt;
  v.&lt;span style=&#34;color:#ff0000&#34;&gt;push_back&lt;/span&gt;(std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string(&lt;span style=&#34;color: #BA2121&#34;&gt;&#34;world&#34;&lt;/span&gt;));

  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;for_each(v.begin(), v.end(), [](&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;const&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; x) {
    std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;cout &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; x &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;endl;
  });
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h3&gt;出力&lt;/h3&gt;
&lt;p&gt;&lt;pre&gt;&lt;code&gt;hello
world
&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;参照&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kmonos.net/wlog/111.html#_2334100705&#34; target=&#34;_blank&#34;&gt;２倍だけじゃない - Derive Your Dreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kmonos.net/wlog/111.html#_1001100720&#34; target=&#34;_blank&#34;&gt;それでも２倍だ - Derive Your Dreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2252&#34; target=&#34;_blank&#34;&gt;LWG Issue 2252. Strong guarantee on &lt;code&gt;vector::push_back()&lt;/code&gt; still broken with C++11?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;C++03では、「&lt;code&gt;vector&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt;、&lt;code&gt;deque&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt;と&lt;code&gt;push_front()&lt;/code&gt;で例外が発生した場合、副作用が発生しない」という強い保証があった。&lt;/li&gt;
&lt;li&gt;C++11では、ムーブ対応のため文面が見直されたが、その際に&lt;code&gt;insert()&lt;/code&gt; &lt;code&gt;emplace()&lt;/code&gt;とまとめて以下のような仕様となった：&lt;ul&gt;
&lt;li&gt;「(挿入操作において、)要素型 T のコピーコンストラクタ、ムーブコンストラクタ、代入演算子、ムーブ代入演算子、あるいはInputIteratorの操作以外で例外が発生した場合、副作用が発生しない。」&lt;/li&gt;
&lt;li&gt;このため、コピーコンストラクタで例外が発生した場合が保証の範囲外となり、保証が弱まってしまっていた。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;C++14では、上記文面を見直し、終端（&lt;code&gt;deque&lt;/code&gt;の場合は両端）への単一要素の追加の場合に限りC++03と同等の強い保証を提供するよう修正された。&lt;/li&gt;
&lt;li&gt;それに加えて、C++14ではこの強い保証を提供する関数を、以下のように拡大した：&lt;ul&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt; (C++03から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/emplace_back.html&#34;&gt;&lt;code&gt;emplace_back()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の終端へ単一要素を挿入する&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/insert.html&#34;&gt;&lt;code&gt;insert()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/emplace.html&#34;&gt;&lt;code&gt;emplace()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/push_back.html&#34;&gt;&lt;code&gt;push_back()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/push_front.html&#34;&gt;&lt;code&gt;push_front()&lt;/code&gt;&lt;/a&gt; (C++03から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace_back.html&#34;&gt;&lt;code&gt;emplace_back()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace_front.html&#34;&gt;&lt;code&gt;emplace_front()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の両端へ単一要素を挿入する&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/insert.html&#34;&gt;&lt;code&gt;insert()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace.html&#34;&gt;&lt;code&gt;emplace()&lt;/code&gt;&lt;/a&gt; (C++14)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</content>
      
      <author>
        <name>Akira Takahashi</name>
        <email>faithandbrave@gmail.com</email>
      </author>
    </entry>
  
    <entry>
      <title>is_nothrow_move_constructible -- is_nothrow_move_constructible : ユースケースを記載</title>
      <link href="http://cpprefjp.github.io/reference/type_traits/is_nothrow_move_constructible.html"/>
      <id>54923c4cc746d81fd639c53859ec99511f0606ad:reference/type_traits/is_nothrow_move_constructible.md</id>
      <updated>2015-10-20 23:20:50 +0900</updated>
      
        <content type="html">&lt;div class=&#34;identifier-type&#34;&gt;class template&lt;/div&gt;&lt;div class=&#34;header&#34;&gt;&amp;lt;type_traits&amp;gt;&lt;/div&gt;&lt;h1 itemprop=&#34;name&#34;&gt;&lt;span class=&#34;namespace&#34; title=&#34;namespace std&#34;&gt;std::&lt;/span&gt;is_nothrow_move_constructible&lt;span class=&#34;cpp cpp11&#34; title=&#34;C++11で追加&#34;&gt;(C++11)&lt;/span&gt;&lt;/h1&gt;
&lt;div itemprop=&#34;articleBody&#34;&gt;&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;namespace&lt;/span&gt; std {
  &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;template&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;T&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;struct&lt;/span&gt; is_nothrow_move_constructible;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h2&gt;概要&lt;/h2&gt;
&lt;p&gt;型&lt;code&gt;T&lt;/code&gt;がムーブ構築でき、かつそのムーブコンストラクタが例外を投げないか調べる。&lt;/p&gt;
&lt;p&gt;これを使用することにより、特定の条件を満たすことで、例外を投げない強い保証をする関数・クラスを実装できる。&lt;/p&gt;
&lt;h2&gt;要件&lt;/h2&gt;
&lt;p&gt;型&lt;code&gt;T&lt;/code&gt;は完全型であるか、&lt;code&gt;const&lt;/code&gt;/&lt;code&gt;volatile&lt;/code&gt;修飾された(あるいはされていない)&lt;code&gt;void&lt;/code&gt;か、要素数不明の配列型でなければならない。&lt;/p&gt;
&lt;h2&gt;効果&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;is_nothrow_move_constructible&lt;/code&gt;は、型&lt;code&gt;T&lt;/code&gt;が例外を投げない保証のもとにムーブ構築可能であるならば&lt;a href=&#34;http://cpprefjp.github.io/reference/type_traits/integral_constant-true_type-false_type.html&#34;&gt;&lt;code&gt;true_type&lt;/code&gt;&lt;/a&gt;から派生し、そうでなければ&lt;a href=&#34;http://cpprefjp.github.io/reference/type_traits/integral_constant-true_type-false_type.html&#34;&gt;&lt;code&gt;false_type&lt;/code&gt;&lt;/a&gt;から派生する。&lt;/p&gt;
&lt;p&gt;以下の条件が&lt;code&gt;true&lt;/code&gt;である場合に、例外を投げないムーブ構築が可能であると見なされる：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C++11 : &lt;a href=&#34;http://cpprefjp.github.io/reference/type_traits/is_nothrow_constructible.html&#34;&gt;&lt;code&gt;is_nothrow_constructible&lt;/code&gt;&lt;/a&gt;&lt;code&gt;&amp;lt;T, T&amp;amp;&amp;amp;&amp;gt;::value == true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;C++14 : 参照可能な型&lt;code&gt;T&lt;/code&gt;に対しては、&lt;a href=&#34;http://cpprefjp.github.io/reference/type_traits/is_nothrow_constructible.html&#34;&gt;&lt;code&gt;is_nothrow_constructible&lt;/code&gt;&lt;/a&gt;&lt;code&gt;&amp;lt;T, T&amp;amp;&amp;amp;&amp;gt;::value == true&lt;/code&gt;と同じ結果となり、それ以外は&lt;code&gt;false&lt;/code&gt;と見なされる。&lt;ul&gt;
&lt;li&gt;参照可能な型とは、以下のいずれかの条件に合致する型である：&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/reference/type_traits/is_object.html&#34;&gt;オブジェクト型&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CV修飾されていない、もしくは参照修飾されていない関数型&lt;/li&gt;
&lt;li&gt;参照修飾されている型&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;例&lt;/h2&gt;
&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;type_traits&amp;gt;&lt;/span&gt;

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// nothrow move constructible&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;struct&lt;/span&gt; A {};

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// nothrow move constructible&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;struct&lt;/span&gt; B {
  B(B&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;) noexcept {}
};

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// not nothrow move constructible&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;struct&lt;/span&gt; C {
  C(C&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;) {}
};

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// not nothrow move constructible&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;struct&lt;/span&gt; D {
  D(D&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;) noexcept(&lt;span style=&#34;color: #008000&#34;&gt;false&lt;/span&gt;) {}
};

static_assert(
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;is_nothrow_move_constructible&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;::&lt;/span&gt;value &lt;span style=&#34;color: #666666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color: #008000&#34;&gt;true&lt;/span&gt;,
  &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;int is nothrow move constructible&#34;&lt;/span&gt;);

static_assert(
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;is_nothrow_move_constructible&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;A&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;::&lt;/span&gt;value &lt;span style=&#34;color: #666666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color: #008000&#34;&gt;true&lt;/span&gt;,
  &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;A is nothrow move constructible&#34;&lt;/span&gt;);

static_assert(
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;is_nothrow_move_constructible&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;B&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;::&lt;/span&gt;value &lt;span style=&#34;color: #666666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color: #008000&#34;&gt;true&lt;/span&gt;,
  &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;B is nothrow move constructible&#34;&lt;/span&gt;);

static_assert(
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;is_nothrow_move_constructible&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;C&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;::&lt;/span&gt;value &lt;span style=&#34;color: #666666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color: #008000&#34;&gt;false&lt;/span&gt;,
  &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;C isn&#39;t nothrow move constructible&#34;&lt;/span&gt;);

static_assert(
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;is_nothrow_move_constructible&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;D&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;::&lt;/span&gt;value &lt;span style=&#34;color: #666666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color: #008000&#34;&gt;false&lt;/span&gt;,
  &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;D isn&#39;t nothrow move constructible&#34;&lt;/span&gt;);

&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;main&lt;/span&gt;() {}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h3&gt;出力&lt;/h3&gt;
&lt;p&gt;&lt;pre&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;バージョン&lt;/h2&gt;
&lt;h3&gt;言語&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;C++11&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;処理系&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#clang&#34;&gt;Clang, C++11 mode&lt;/a&gt;: 3.0&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/implementation.html#gcc&#34;&gt;GCC, C++11 mode&lt;/a&gt;: 4.7.3&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;関連項目&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://cpprefjp.github.io/reference/utility/move_if_noexcept.html&#34;&gt;move_if_noexcept&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参照&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2983.html&#34; target=&#34;_blank&#34;&gt;N2983 Allowing Move Constructors to Throw&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2196&#34; target=&#34;_blank&#34;&gt;LWG Issue 2196. Specification of &lt;code&gt;is_*[copy/move]_[constructible/assignable]&lt;/code&gt; unclear for non-referencable types&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;C++11では、この型特性が参照型に対してどのような振る舞いになるのか不明確であったため、C++14で明確化された。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</content>
      
      <author>
        <name>Akira Takahashi</name>
        <email>faithandbrave@gmail.com</email>
      </author>
    </entry>
  
    <entry>
      <title>push_back -- リンク切れを修正</title>
      <link href="http://cpprefjp.github.io/reference/vector/push_back.html"/>
      <id>e0a8d8f56229b8fb8b13644e3327741df1cc8bda:reference/vector/push_back.md</id>
      <updated>2015-10-20 23:18:04 +0900</updated>
      
        <content type="html">&lt;div class=&#34;identifier-type&#34;&gt;function&lt;/div&gt;&lt;div class=&#34;header&#34;&gt;&amp;lt;vector&amp;gt;&lt;/div&gt;&lt;h1 itemprop=&#34;name&#34;&gt;&lt;span class=&#34;namespace&#34; title=&#34;namespace std&#34;&gt;std::&lt;/span&gt;&lt;span class=&#34;class&#34; title=&#34;class vector&#34;&gt;vector::&lt;/span&gt;push_back&lt;/h1&gt;
&lt;div itemprop=&#34;articleBody&#34;&gt;&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;push_back&lt;/span&gt;(&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;const&lt;/span&gt; T&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; x); &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// (1)&lt;/span&gt;
&lt;span style=&#34;color: #B00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;push_back&lt;/span&gt;(T&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; x);      &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// (2) C++11&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h2&gt;概要&lt;/h2&gt;
&lt;p&gt;新たな要素を末尾に追加する。&lt;/p&gt;
&lt;h2&gt;戻り値&lt;/h2&gt;
&lt;p&gt;なし&lt;/p&gt;
&lt;h2&gt;計算量&lt;/h2&gt;
&lt;p&gt;償却定数時間。&lt;/p&gt;
&lt;p&gt;この関数を呼び出す前に&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;であった場合、この関数の実行は定数時間で行われる。そうでない場合は、メモリ領域の再確保と、その領域への要素のコピーもしくはムーブが行われるため、線形時間で実行される。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vector&lt;/code&gt;の実装で行われるメモリ確保戦略では、再確保の際にそれら要素がぴったり収まるサイズを確保するのではなく、少し多めの1.5倍や2倍といったサイズのメモリを確保し、再確保の回数を減らしている。事前に追加する要素の数がわかっている場合には&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/reserve.html&#34;&gt;&lt;code&gt;reserve&lt;/code&gt;&lt;/a&gt;メンバ関数で事前にその要素数分のメモリを確保し、そうでない場合には&lt;code&gt;vector&lt;/code&gt;のメモリ確保戦略に任せるのがよいだろう。&lt;/p&gt;
&lt;h2&gt;備考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;要素を追加した後の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/size.html&#34;&gt;&lt;code&gt;size()&lt;/code&gt;&lt;/a&gt;が要素を追加する前の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/capacity.html&#34;&gt;&lt;code&gt;capacity()&lt;/code&gt;&lt;/a&gt;よりも大きい場合は領域の再確保が生じる。領域の再確保が生じなかった場合には全てのイテレータや参照は有効である。&lt;/li&gt;
&lt;li&gt;非CopyInsertableな要素型&lt;code&gt;T&lt;/code&gt;のムーブコンストラクタ以外で例外が発生した場合、副作用は発生しない。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;例&lt;/h2&gt;
&lt;p&gt;&lt;div class=&#34;codehilite&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;string&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #BC7A00&#34;&gt;#include &amp;lt;algorithm&amp;gt;&lt;/span&gt;

&lt;span style=&#34;color: #B00040&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color: #0000FF&#34;&gt;main&lt;/span&gt;()
{
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;vector&lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt; v;

  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// const&amp;amp;バージョン&lt;/span&gt;
  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string s &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&#34;hello&#34;&lt;/span&gt;;
  v.&lt;span style=&#34;color:#ff0000&#34;&gt;push_back&lt;/span&gt;(s);

  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;// &amp;amp;&amp;amp;バージョン&lt;/span&gt;
  v.&lt;span style=&#34;color:#ff0000&#34;&gt;push_back&lt;/span&gt;(std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string(&lt;span style=&#34;color: #BA2121&#34;&gt;&#34;world&#34;&lt;/span&gt;));

  std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;for_each(v.begin(), v.end(), [](&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;const&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;string&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; x) {
    std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;cout &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; x &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; std&lt;span style=&#34;color: #666666&#34;&gt;::&lt;/span&gt;endl;
  });
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;h3&gt;出力&lt;/h3&gt;
&lt;p&gt;&lt;pre&gt;&lt;code&gt;hello
world
&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;参照&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kmonos.net/wlog/111.html#_2334100705&#34; target=&#34;_blank&#34;&gt;２倍だけじゃない - Derive Your Dreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kmonos.net/wlog/111.html#_1001100720&#34; target=&#34;_blank&#34;&gt;それでも２倍だ - Derive Your Dreams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2252&#34; target=&#34;_blank&#34;&gt;LWG Issue 2252. Strong guarantee on &lt;code&gt;vector::push_back()&lt;/code&gt; still broken with C++11?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;C++03では、「&lt;code&gt;vector&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt;、&lt;code&gt;deque&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt;と&lt;code&gt;push_front()&lt;/code&gt;で例外が発生した場合、副作用が発生しない」という強い保証があった。&lt;/li&gt;
&lt;li&gt;C++11では、ムーブ対応のため文面が見直されたが、その際に&lt;code&gt;insert()&lt;/code&gt; &lt;code&gt;emplace()&lt;/code&gt;とまとめて以下のような仕様となった：&lt;ul&gt;
&lt;li&gt;「(挿入操作において、)要素型 T のコピーコンストラクタ、ムーブコンストラクタ、代入演算子、ムーブ代入演算子、あるいはInputIteratorの操作以外で例外が発生した場合、副作用が発生しない。」&lt;/li&gt;
&lt;li&gt;このため、コピーコンストラクタで例外が発生した場合が保証の範囲外となり、保証が弱まってしまっていた。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;C++14では、上記文面を見直し、終端（&lt;code&gt;deque&lt;/code&gt;の場合は両端）への単一要素の追加の場合に限りC++03と同等の強い保証を提供するよう修正された。&lt;/li&gt;
&lt;li&gt;それに加えて、C++14ではこの強い保証を提供する関数を、以下のように拡大した：&lt;ul&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の&lt;code&gt;push_back()&lt;/code&gt; (C++03から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/emplace_back.html&#34;&gt;&lt;code&gt;emplace_back()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vector&lt;/code&gt;の終端へ単一要素を挿入する&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/insert.html&#34;&gt;&lt;code&gt;insert()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/vector/emplace.html&#34;&gt;&lt;code&gt;emplace()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/push_back.html&#34;&gt;&lt;code&gt;push_back()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/push_front.html&#34;&gt;&lt;code&gt;push_front()&lt;/code&gt;&lt;/a&gt; (C++03から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace_back.html&#34;&gt;&lt;code&gt;emplace_back()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace_front.html&#34;&gt;&lt;code&gt;emplace_front()&lt;/code&gt;&lt;/a&gt; (C++14から)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deque&lt;/code&gt;の両端へ単一要素を挿入する&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/insert.html&#34;&gt;&lt;code&gt;insert()&lt;/code&gt;&lt;/a&gt;と&lt;a href=&#34;http://cpprefjp.github.io/reference/deque/emplace.html&#34;&gt;&lt;code&gt;emplace()&lt;/code&gt;&lt;/a&gt; (C++14)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</content>
      
      <author>
        <name>Akira Takahashi</name>
        <email>faithandbrave@gmail.com</email>
      </author>
    </entry>
  
</feed>