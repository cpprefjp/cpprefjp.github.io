<h1>distance</h1>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">namespace std {
  template &lt;class InputIterator&gt;
  typename iterator_traits&lt;InputIterator&gt;::difference_type
              distance(InputIterator first, InputIterator last);
}</span></code></pre>
</p>
<h2>概要</h2>
<p>イテレータ間の距離を求める。</p>
<h2>要件</h2>
<p><code><span style="color: #000">InputIterator</span></code>がランダムアクセスイテレータの場合、<code><span style="color: #000">first</span></code>は<code><span style="color: #000">last</span></code>に到達可能、もしくは<code><span style="color: #000">last</span></code>から<code><span style="color: #000">first</span></code>に到達可能であること。
それ以外のイテレータの場合には、<code><span style="color: #000">first</span></code>から<code><span style="color: #000">last</span></code>に到達可能であること。</p>
<h2>効果</h2>
<p><code><span style="color: #000">InputIterator</span></code>がランダムアクセスイテレータの場合は、<code><span style="color: #000">last - first</span></code>が返る。
それ以外のイテレータの場合は、<code><span style="color: #000">first</span></code>から<code><span style="color: #000">last</span></code>までイテレータをインクリメントしていき、距離をカウントする。</p>
<h2>戻り値</h2>
<p><code><span style="color: #000">first</span></code>から<code><span style="color: #000">last</span></code>までの距離</p>
<h2>計算量</h2>
<p><code><span style="color: #000">InputIterator</span></code>がランダムアクセスイテレータの場合はO(1)。それ以外のイテレータの場合はO(n)。</p>
<h2>例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color:#ff0000">distance</span>(v.begin(), v.end());

    std::cout &lt;&lt; d &lt;&lt; std::endl;
  }
  {
    std::list&lt;int&gt; ls = {3, 1, 4, 5, 2};
    std::size_t d = std::<span style="color:#ff0000">distance</span>(ls.begin(), ls.end());

    std::cout &lt;&lt; d &lt;&lt; std::endl;
  }
}<span style="color: #000">#include &lt;iterator&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;list&gt;

int main()
{
  {
    std::vector&lt;int&gt; v = {3, 1, 4};
    std::size_t d = std::</span></code></pre>
</p>
<h3>出力</h3>
<p><pre><code><span style="color: #000">3
5
</span></code></pre></p>
<h2>実装例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">template &lt;class InputIterator&gt;
typename std::iterator_traits&lt;InputIterator&gt;::difference_type
    distance_impl(InputIterator first, InputIterator last,
                  std::input_iterator_tag)
{
  typedef
    typename std::iterator_traits&lt;InputIterator&gt;::difference_type
  result_type;

  result_type n = 0;
  for (; first != last; ++first) {
    ++n;
  }
  return n;
}

template &lt;class RandomAccessIterator&gt;
typename std::iterator_traits&lt;RandomAccessIterator&gt;::difference_type
    distance_impl(RandomAccessIterator first, RandomAccessIterator last,
                  std::random_access_iterator_tag)
{
  return last - first;
}

template &lt;class InputIterator&gt;
typename std::iterator_traits&lt;InputIterator&gt;::difference_type
    distance(InputIterator first, InputIterator last)
{
  return distance_impl(first, last,
              typename std::iterator_traits&lt;InputIterator&gt;::iterator_category());
}</span></code></pre>
</p>
<h2>参照</h2>
<footer><a href="https://github.com/cpprefjp/site/edit/master/reference/iterator/distance.md" target="_blank">編集</a></footer>