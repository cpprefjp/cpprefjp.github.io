<h1>type_info</h1>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">namespace std {
  class type_info;
}</span></code></pre>
</p>
<h2>概要</h2>
<p><code><span style="color: #000">type_info</span></code>クラスは、<code><span style="color: #000">typeid</span></code>演算子によって返される、型の情報が格納された型である。ユーザーは、この型を使用して、型名の検索や比較を行うことができる。<code><span style="color: #000">typeid</span></code>演算子に型を渡すと、その型の<code><span style="color: #000">type_info</span></code>オブジェクトが返され、<code><span style="color: #000">typeid</span></code>演算子にオブジェクトを渡すと、そのオブジェクトの型の<code><span style="color: #000">type_info</span></code>オブジェクトが返される。<code><span style="color: #000">typeid</span></code>に、多相的な型のオブジェクトへの間接参照されたポインタに適用される場合、その型は実行時に決定する。これは、RTTI(実行時型情報)が利用可能であることを要求する。<code><span style="color: #000">typeid</span></code>演算子に、間接参照されたヌルポインタが渡された場合、<a href="http://cpprefjp.github.io/reference/typeinfo/bad_typeid.html"><code><span style="color: #000">bad_typeid</span></code></a>例外が投げられる。</p>
<h2>メンバ関数</h2>
<table border="1" bordercolor="#888" style="border-collapse:collapse">
<thead>
<tr>
<th>名前</th>
<th>説明</th>
<th>対応バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/type_info.html"><code><span style="color: #000">(constructor)</span></code></a></td>
<td>コンストラクタ</td>
<td></td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/-type_info.html"><code><span style="color: #000">(destructor)</span></code></a></td>
<td>デストラクタ</td>
<td></td>
</tr>
<tr>
<td><code><span style="color: #000">operator=(const type_info&amp;) = delete</span></code></td>
<td>代入演算子</td>
<td></td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/before.html"><code><span style="color: #000">before</span></code></a></td>
<td>2つの型の照合順序を比較する</td>
<td></td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/hash_code.html"><code><span style="color: #000">hash_code</span></code></a></td>
<td>型のハッシュ値を取得する</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/name.html"><code><span style="color: #000">name</span></code></a></td>
<td>実装定義の型名を取得する</td>
<td></td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/op_equal.html"><code><span style="color: #000">operator==</span></code></a></td>
<td>2つの型が同じかを判定する</td>
<td></td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/typeinfo/type_info/op_not_equal.html"><code><span style="color: #000">operator!=</span></code></a></td>
<td>2つの型が異なるかを判定する</td>
<td></td>
</tr>
</tbody>
</table>
<h2>例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">#include &lt;iostream&gt;
#include &lt;typeinfo&gt;

struct Base {};
struct Derived : public Base {};

struct PolyBase { virtual void member(){} };
struct PolyDerived : public PolyBase {};

int main() {
  // 組み込み型
  int i;
  int* pi;
  std::cout &lt;&lt; "int is: " &lt;&lt; typeid(int).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; "  i is: " &lt;&lt; typeid(i).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; " pi is: " &lt;&lt; typeid(pi).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; "*pi is: " &lt;&lt; typeid(*pi).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; std::endl;

  // 非多相的な型
  Derived derived;
  Base* pbase = &amp;derived;
  std::cout &lt;&lt; "derived is: " &lt;&lt; typeid(derived).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; " *pbase is: " &lt;&lt; typeid(*pbase).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; std::boolalpha &lt;&lt; "same type? "
            &lt;&lt; (typeid(derived) == typeid(*pbase)) &lt;&lt; std::endl;
  std::cout &lt;&lt; std::endl;

  // 多相的な型
  PolyDerived polyderived;
  PolyBase* ppolybase = &amp;polyderived;
  std::cout &lt;&lt; "polyderived is: " &lt;&lt; typeid(polyderived).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; " *ppolybase is: " &lt;&lt; typeid(*ppolybase).name() &lt;&lt; std::endl;
  std::cout &lt;&lt; std::boolalpha &lt;&lt; "same type? "
            &lt;&lt; (typeid(polyderived) == typeid(*ppolybase)) &lt;&lt; std::endl;
}</span></code></pre>
</p>
<h3>出力例</h3>
<p><pre><code><span style="color: #000">int is: int
  i is: int
 pi is: int *
*pi is: int

derived is: struct Derived
 *pbase is: struct Base
same type? false

polyderived is: struct PolyDerived
 *ppolybase is: struct PolyDerived
same type? true
</span></code></pre></p>
<h3>参照</h3>
<footer><a href="https://github.com/cpprefjp/site/edit/master/reference/typeinfo/type_info.md" target="_blank">編集</a></footer>