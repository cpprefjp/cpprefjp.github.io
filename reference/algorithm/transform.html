<h1>transform</h1>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">namespace std {
  template &lt;class InputIterator, class OutputIterator, class UnaryOperation&gt;
  OutputIterator transform(InputIterator first, InputIterator last,
                           OutputIterator result, UnaryOperation op); // (1)

  template &lt;class InputIterator1, class InputIterator2,
            class OutputIterator, class BinaryOperation&gt;
  OutputIterator transform(InputIterator1 first1,
                           InputIterator1 last1,
                           InputIterator2 first2,
                           OutputIterator result,
                           BinaryOperation binary_op);                // (2)
}</span></code></pre>
</p>
<h2>概要</h2>
<p>全ての要素に関数を適用する。</p>
<h2>要件</h2>
<ul>
<li>(1) : <code><span style="color: #000">op</span></code> は、<code><span style="color: #000">[first,last]</span></code>, <code><span style="color: #000">[result,result + (last - first)]</span></code> 内のイテレータや subrange を無効にしたり、要素を書き換えてはならない。</li>
<li>(2) : <code><span style="color: #000">binary_op</span></code> は、<code><span style="color: #000">[first1,last1]</span></code>, <code><span style="color: #000">[first2,first2 + (last1 - first1)]</span></code>, <code><span style="color: #000">[result,result + (last1 - first1)]</span></code> 内のイテレータや subrange を無効にしたり、要素を書き換えてはならない。</li>
</ul>
<p>※ 閉区間で表しているのは意図的なもの</p>
<h2>効果</h2>
<ul>
<li>(1) : <code><span style="color: #000">[result,result + (last - first))</span></code> 内のイテレータ <code><span style="color: #000">i</span></code> の要素に、それぞれ <code><span style="color: #000">op(*(first + (i - result)))</span></code> を代入する</li>
<li>(2) : <code><span style="color: #000">[result,result + (last1 - first1))</span></code> 内のイテレータ <code><span style="color: #000">i</span></code> の要素に、それぞれ <code><span style="color: #000">binary_op(*(first1 + (i - result)), *(first2 + (i - result)))</span></code> を代入する。</li>
</ul>
<h2>戻り値</h2>
<ul>
<li>(1) : <code><span style="color: #000">result + (last - first)</span></code></li>
<li>(2) : <code><span style="color: #000">result + (last1 - first1)</span></code></li>
</ul>
<h2>計算量</h2>
<ul>
<li>(1) : 正確に <code><span style="color: #000">last - first</span></code> 回の <code><span style="color: #000">op</span></code> の適用が行われる。</li>
<li>(2) : 正確に <code><span style="color: #000">last - first</span></code> 回の <code><span style="color: #000">binary_op</span></code> の適用が行われる。</li>
</ul>
<h2>備考</h2>
<ul>
<li>(1) : <code><span style="color: #000">result</span></code> は <code><span style="color: #000">first</span></code> と同じであっても構わない。</li>
<li>(2) : <code><span style="color: #000">result</span></code> は <code><span style="color: #000">first1</span></code> や <code><span style="color: #000">first2</span></code> と同じであっても構わない。</li>
</ul>
<h2>(1)の例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color:#ff0000">transform</span>(v.begin(), v.end(), std::back_inserter(result),
    [](int x) { return std::to_string(x * 2); });

  std::for_each(result.begin(), result.end(),
    [](const std::string&amp; s) { std::cout &lt;&lt; s &lt;&lt; std::endl; });
}<span style="color: #000">#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;

int main() {
  std::vector&lt;int&gt; v = { 3,1,4 };
  std::vector&lt;std::string&gt; result;

  // 2倍してから文字列に変換する
  std::</span></code></pre>
</p>
<h3>出力</h3>
<p><pre><code><span style="color: #000">6
2
8
</span></code></pre></p>
<h2>(2)の例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color:#ff0000">transform</span>(v1.begin(), v1.end(), v2.begin(), std::back_inserter(result),
    [](char a, int b) { return std::string(b, a); });

  std::for_each(result.begin(), result.end(),
    [](const std::string&amp; s) { std::cout &lt;&lt; s &lt;&lt; std::endl; });
}<span style="color: #000">#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;

int main() {
  std::vector&lt;char&gt; v1 = { 'a','b','c' };
  std::vector&lt;int&gt; v2 = { 3,1,4 };
  std::vector&lt;std::string&gt; result;

  // v1[n] の文字を v2[n] 回繰り返した文字列を返す
  std::</span></code></pre>
</p>
<h3>出力</h3>
<p><pre><code><span style="color: #000">aaa
b
cccc
</span></code></pre></p>
<h2>実装例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">template &lt;class InputIterator, class OutputIterator, class UnaryOperation&gt;
OutputIterator transform(InputIterator first, InputIterator last,
                         OutputIterator result, UnaryOperation op) {
  while (first != last)
    *result++ = op(*first++);
  return result;
}

template &lt;class InputIterator1, class InputIterator2,
          class OutputIterator, class BinaryOperation&gt;
OutputIterator transform(InputIterator1 first1,
                         InputIterator1 last1,
                         InputIterator2 first2,
                         OutputIterator result,
                         BinaryOperation binary_op) {
  while (first1 != last1)
    *result++ = binary_op(*first1++, *first2++);
  return result;
}</span></code></pre>
</p>
<footer><a href="https://github.com/cpprefjp/site/edit/master/reference/algorithm/transform.md" target="_blank">編集</a></footer>