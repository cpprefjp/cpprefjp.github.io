<h1>デストラクタ (C++11)</h1>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">~shared_ptr();</span></code></pre>
</p>
<h2><code><span style="color: #000">shared_ptr</span></code>オブジェクトの破棄</h2>
<p>自身のみが所有権を持つ場合に、リソースを解放する。</p>
<h2>効果</h2>
<p>他の<code><span style="color: #000">shared_ptr</span></code>オブジェクトとリソースを共有している場合(<a href="http://cpprefjp.github.io/reference/memory/shared_ptr/use_count.html"><code><span style="color: #000">use_count()</span></code></a> <code><span style="color: #000">&gt; 1</span></code>)、効果なし。</p>
<p>自身のみが<code><span style="color: #000">shared_ptr</span></code>オブジェクトのリソースを所有している場合、</p>
<ul>
<li>デリータを持っていれば<code><span style="color: #000">d(p)</span></code>でリソースを解放する。</li>
<li>デリータを持っていなければ、<code><span style="color: #000">delete p</span></code>でリソースを解放する。</li>
</ul>
<h2>備考</h2>
<p>実際には<code><span style="color: #000">shared_ptr</span></code>は参照カウントで実装されるため、他の<code><span style="color: #000">shared_ptr</span></code>オブジェクトと所有権を共有している状態でデストラクタが実行された場合、参照カウントを<code><span style="color: #000">1</span></code>減らす、ということを行う。</p>
<footer><a href="https://github.com/cpprefjp/site/edit/master/reference/memory/shared_ptr/-shared_ptr.md" target="_blank">編集</a></footer>