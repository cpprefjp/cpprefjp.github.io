<h1>function (C++11)</h1>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">namespace std {
  template &lt;class&gt; class function; // 宣言のみ

  template &lt;class R, class... ArgTypes&gt;
  class function&lt;R(ArgTypes...)&gt;;
}</span></code></pre>
</p>
<h2>概要</h2>
<p><code><span style="color: #000">function</span></code>クラステンプレートは、パラメータの型リスト<code><span style="color: #000">ArgTypes...</span></code>、戻り値の型<code><span style="color: #000">R</span></code>に合致する、あらゆる関数ポインタ、関数オブジェクト、メンバ関数ポインタ、メンバ変数ポインタを保持できるクラスである。</p>
<p>このクラスは、以下のように使用する：</p>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">int add(int x) { return x; }

// 関数を変数に保持する
function&lt;int(int)&gt; f = add;

// 保持している関数を呼び出す
int result = f(1); // result == 2</span></code></pre>

<code><span style="color: #000">function</span></code>のテンプレート引数には、「戻り値の型(引数の型リスト...)」という形式で、型で関数のシグニチャを指定する。</p>
<p><code><span style="color: #000">function</span></code>クラスは具体的な関数・関数オブジェクトの型には依存しない。シグニチャが一致していればあらゆる型の関数、関数オブジェクトを代入できる。</p>
<h3>メンバ関数</h3>
<table border="1" bordercolor="#888" style="border-collapse:collapse">
<thead>
<tr>
<th>名前</th>
<th>説明</th>
<th>対応バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/function.html"><code><span style="color: #000">(constructor)</span></code></a></td>
<td>コンストラクタ</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/-function.html"><code><span style="color: #000">(destructor)</span></code></a></td>
<td>デストラクタ</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/op_assign.html"><code><span style="color: #000">operator=</span></code></a></td>
<td>代入演算子</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/swap.html"><code><span style="color: #000">swap</span></code></a></td>
<td>他の<code><span style="color: #000">function</span></code>オブジェクトと中身を入れ替える</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/assign.html"><code><span style="color: #000">assign</span></code></a></td>
<td>関数オブジェクトとアロケータを再代入する</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/op_bool.html"><code><span style="color: #000">operator bool</span></code></a></td>
<td>関数呼び出しが可能か調べる</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/op_call.html"><code><span style="color: #000">operator()</span></code></a></td>
<td>関数呼び出し</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/target_type.html"><code><span style="color: #000">target_type</span></code></a></td>
<td>元となる関数の型情報を取得する</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/target.html"><code><span style="color: #000">target</span></code></a></td>
<td>元となる関数を取得する</td>
<td>C++11</td>
</tr>
</tbody>
</table>
<h3>メンバ型</h3>
<table border="1" bordercolor="#888" style="border-collapse:collapse">
<thead>
<tr>
<th>名前</th>
<th>説明</th>
<th>対応バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td><code><span style="color: #000">result_type</span></code></td>
<td>関数の戻り値の型(テンプレートパラメータ<code><span style="color: #000">R</span></code>)</td>
<td>C++11</td>
</tr>
<tr>
<td><code><span style="color: #000">argument_type</span></code></td>
<td>第1引数の型(引数が1つの場合のみ定義される)</td>
<td>C++11</td>
</tr>
<tr>
<td><code><span style="color: #000">first_argument_type</span></code></td>
<td>第1引数の型(引数が2つの場合のみ定義される)</td>
<td>C++11</td>
</tr>
<tr>
<td><code><span style="color: #000">second_argument_type</span></code></td>
<td>第2引数の型(引数が2つの場合のみ定義される)</td>
<td>C++11</td>
</tr>
</tbody>
</table>
<h3>非メンバ関数</h3>
<table border="1" bordercolor="#888" style="border-collapse:collapse">
<thead>
<tr>
<th>名前</th>
<th>説明</th>
<th>対応バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/op_equal.html"><code><span style="color: #000">operator==</span></code></a></td>
<td>等値比較</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/op_not_equal.html"><code><span style="color: #000">operator!=</span></code></a></td>
<td>非等値比較</td>
<td>C++11</td>
</tr>
<tr>
<td><a href="http://cpprefjp.github.io/reference/functional/function/swap_free.html"><code><span style="color: #000">swap</span></code></a></td>
<td>2つの<code><span style="color: #000">function</span></code>オブジェクトを入れ替える</td>
<td>C++11</td>
</tr>
</tbody>
</table>
<h3>その他</h3>
<table border="1" bordercolor="#888" style="border-collapse:collapse">
<thead>
<tr>
<th>名前</th>
<th>説明</th>
<th>対応バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td><code><span style="color: #000">uses_allocator</span></code></td>
<td><code><span style="color: #000">function</span></code>による特殊化</td>
<td>C++11</td>
</tr>
</tbody>
</table>
<h2>例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">#include &lt;iostream&gt;
#include &lt;functional&gt;

int add(int x) { return x + 1; }

int main()
{
  // 関数を代入
  std::function&lt;int(int)&gt; f = add;

  // 関数オブジェクトを代入
  f = [](int x) { return x + 1; };

  // 保持している関数を呼び出す
  int result = f(1);
  std::cout &lt;&lt; result &lt;&lt; std::endl;
}</span></code></pre>
</p>
<h3>出力</h3>
<p><pre><code><span style="color: #000">2
</span></code></pre></p>
<h2>バージョン</h2>
<h3>言語</h3>
<ul>
<li>C++11</li>
</ul>
<h3>参照</h3>
<footer><a href="https://github.com/cpprefjp/site/edit/master/reference/functional/function.md" target="_blank">編集</a></footer>