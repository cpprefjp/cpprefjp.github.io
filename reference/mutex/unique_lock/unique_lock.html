<h1>コンストラクタ (C++11)</h1>
<p><pre class="codehilite"><code class="language-cpp"><a href="http://cpprefjp.github.io/reference/mutex/defer_lock.html">defer_lock_t</a>) noexcept;
unique_lock(mutex_type&amp; m, <a href="http://cpprefjp.github.io/reference/mutex/try_to_lock.html">try_to_lock_t</a>);
unique_lock(mutex_type&amp; m, <a href="http://cpprefjp.github.io/reference/mutex/adopt_lock.html">adopt_lock_t</a>);

template &lt;class Clock, class Duration&gt;
unique_lock(mutex_type&amp; m, const chrono::<a href="http://cpprefjp.github.io/reference/chrono/time_point.html">time_point</a>&lt;Clock, Duration&gt;&amp; abs_time);

template &lt;class Rep, class Period&gt;
unique_lock(mutex_type&amp; m, const chrono::<a href="http://cpprefjp.github.io/reference/chrono/duration.html">duration</a>&lt;Rep, Period&gt;&amp; rel_time);

unique_lock(const unique_lock&amp;) = delete;
unique_lock(unique_lock&amp;&amp; u) noexcept;<span style="color: #000">unique_lock() noexcept;
explicit unique_lock(mutex_type&amp; m);

unique_lock(mutex_type&amp; m, </span></code></pre>
</p>
<h2>unique_lockオブジェクトの構築</h2>
<ul>
<li><code><span style="color: #000">unique_lock() noexcept;</span></code><br />空の<code><span style="color: #000">unique_lock</span></code>オブジェクトを構築する。ミューテックスオブジェクトへのポインタを保持せず、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== false</span></code>となる。</li>
<li><code><span style="color: #000">explicit unique_lock(mutex_type&amp; m);</span></code><br />ミューテックスオブジェクトへの参照を受け取り、<code><span style="color: #000">m.lock()</span></code>を呼び出す。ミューテックスオブジェクトへのポインタを保持し、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== true</span></code>となる。</li>
<li><code><span style="color: #000">unique_lock(mutex_type&amp; m,</span></code><a href="http://cpprefjp.github.io/reference/mutex/defer_lock.html"><code><span style="color: #000">defer_lock_t</span></code></a><code><span style="color: #000">) noexcept;</span></code><br />ミューテックスオブジェクトへの参照を受け取り、ロック取得操作をここでは呼び出さない。ミューテックスオブジェクトへのポインタを保持し、
<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== false</span></code>となる。 </li>
<li><code><span style="color: #000">unique_lock(mutex_type&amp; m,</span></code><a href="http://cpprefjp.github.io/reference/mutex/try_to_lock.html"><code><span style="color: #000">try_to_lock_t</span></code></a><code><span style="color: #000">);</span></code><br />ミューテックスオブジェクトへの参照を受け取り、<code><span style="color: #000">m.try_lock()</span></code>を呼び出す。ミューテックスオブジェクトへのポインタを保持し、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== m.try_lock()</span></code>となる。</li>
<li><code><span style="color: #000">unique_lock(mutex_type&amp; m,</span></code><a href="http://cpprefjp.github.io/reference/mutex/adopt_lock.html"><code><span style="color: #000">adopt_lock_t</span></code></a><code><span style="color: #000">);</span></code><br />ロック取得済みのミューテックスオブジェクトへの参照を受け取り、ロック取得操作を呼び出さない。ミューテックスオブジェクトへのポインタを保持し、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== true</span></code>となる。</li>
<li><code><span style="color: #000">template &lt;class Clock, class Duration&gt;</span></code><br /><code><span style="color: #000">unique_lock(mutex_type&amp; m, const chrono::</span></code><a href="http://cpprefjp.github.io/reference/chrono/time_point.html"><code><span style="color: #000">time_point</span></code></a><code><span style="color: #000">&lt;Clock, Duration&gt;&amp; abs_time);</span></code><br />ミューテックスオブジェクトへの参照を受け取り、<code><span style="color: #000">m.try_lock_until(abs_time)</span></code>を呼び出す。ミューテックスオブジェクトへのポインタを保持し、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== m.try_lock_until(abs_time)</span></code>となる。</li>
<li><code><span style="color: #000">template &lt;class Rep, class Period&gt;</span></code><br /><code><span style="color: #000">unique_lock(mutex_type&amp; m, const chrono::</span></code><a href="http://cpprefjp.github.io/reference/chrono/duration.html"><code><span style="color: #000">duration</span></code></a><code><span style="color: #000">&lt;Rep, Period&gt;&amp; rel_time);</span></code><br />ミューテックスオブジェクトへの参照を受け取り、<code><span style="color: #000">m.try_lock_for(rel_time)</span></code>を呼び出す。ミューテックスオブジェクトへのポインタを保持し、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== m.try_lock_for(rel_time)</span></code>となる。</li>
<li><code><span style="color: #000">unique_lock(unique_lock const&amp;) = delete;</span></code><br />コピーコンストラクタ。コピー不可。</li>
<li><code><span style="color: #000">unique_lock(unique_lock&amp;&amp; u) noexcept;</span></code><br />ムーブコンストラクタ。<code><span style="color: #000">unique_lock</span></code>オブジェクト<code><span style="color: #000">u</span></code>が保持しているミューテックスの所有権を自分のオブジェクトに移動する。ミューテックスオブジェクトへのポインタおよび<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a>の状態を<code><span style="color: #000">u</span></code>から移動し、その後<code><span style="color: #000">u</span></code>はミューテックスオブジェクトへの有効なポインタを指さず、<a href="http://cpprefjp.github.io/reference/mutex/unique_lock/owns_lock.html"><code><span style="color: #000">owns_lock()</span></code></a><code><span style="color: #000">== false</span></code>となる。</li>
</ul>
<h2>例</h2>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">#include &lt;iostream&gt;
#include &lt;mutex&gt;
#include &lt;chrono&gt;
#include &lt;utility&gt; // move

int main()
{
  std::timed_mutex mtx;
  {
    // デフォルト構築 : ミューテックスを参照しない
    std::unique_lock&lt;std::timed_mutex&gt; lk;
  }
  {
    // ミューテックスへの参照を受け取る
    // 内部でmtx.lock()を呼び出す
    std::unique_lock&lt;std::timed_mutex&gt; lk(mtx);
  }
  {
    // コンストラクタ時点ではロック取得せず、あとからロック取得する
    std::unique_lock&lt;std::timed_mutex&gt; lk(mtx, std::defer_lock);
    lk.lock();
  }
  {
    // コンストラクタ内でmtx.try_lock()を呼び出す
    std::unique_lock&lt;std::timed_mutex&gt; lk(mtx, std::try_to_lock);
  }
  {
    mtx.lock(); // 事前にロックを取得する
    std::unique_lock&lt;std::timed_mutex&gt; lk(mtx, std::adopt_lock); // コンストラクタではロック取得しない
  }
  {
    namespace chrono = std::chrono;

    chrono::steady_clock::time_point tp = chrono::steady_clock::now() + chrono::seconds(3);

    // コンストラクタ内でmtx.try_lock_until(tp)を呼び出す
    std::unique_lock&lt;std::timed_mutex&gt; lk(mtx, tp);
  }
  {
    std::chrono::seconds d(3);

    // コンストラクタ内でmtx.try_lock_for(d)を呼び出す
    std::unique_lock&lt;std::timed_mutex&gt; lk(mtx, d);
  }
  {
    std::unique_lock&lt;std::timed_mutex&gt; lk1(mtx);

    // lk1からミューテックスの所有権を移動する
    std::unique_lock&lt;std::timed_mutex&gt; lk2 = std::move(lk1);
  }
}</span></code></pre>
</p>
<h3>出力</h3>
<p><pre><code><span style="color: #000"></span></code></pre></p>
<h2>バージョン</h2>
<h3>言語</h3>
<ul>
<li>C++11</li>
</ul>
<h3>処理系</h3>
<ul>
<li><a href="http://cpprefjp.github.io/implementation.html#clang">Clang</a>: ??</li>
<li><a href="http://cpprefjp.github.io/implementation.html#gcc">GCC</a>: </li>
<li><a href="http://cpprefjp.github.io/implementation.html#gcc">GCC, C++0x mode</a>: 4.7.0</li>
<li><a href="http://cpprefjp.github.io/implementation.html#icc">ICC</a>: ??</li>
<li><a href="http://cpprefjp.github.io/implementation.html#visual_cpp">Visual C++</a> ??</li>
</ul>
<h2>参照</h2>
<footer><a href="https://github.com/cpprefjp/site/edit/master/reference/mutex/unique_lock/unique_lock.md" target="_blank">編集</a></footer>