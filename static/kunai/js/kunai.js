window.Kunai=webpackJsonpKunai([0],{103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){n.d(e,"Kunai",function(){return x});var i=n(44),a=n.n(i),r=n(45),o=n.n(r),s=n(13),l=n.n(s),c=n(19),u=n.n(c),h=n(1),d=n.n(h),f=n(3),p=n.n(f),g=n(20),m=n(152),v=n(153),y=n(157),k=n(187),w=(n(98),n(191)),b=n(194),_=(n.n(b),n(26)),C=n(244),x=(n.n(C),function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(this,e),t("body").addClass("js").removeClass("no-js"),this.opts=u()({},e.defaultOptions,n),this.log=new _.Logger("Kunai",new _.Logger.Option(u()({},this.opts,{icon:{text:"🗡",color:"#2244AA"}}))),this.opts.compat&&(this.compat=new m.a(this.log)),this.initUI(),this.wand=new k.a(this.log),this.yatas=new l.a}return p()(e,[{key:"cpprefjp",value:function(){function t(){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.load_impl(["cpprefjp","site"]),t.next=3,this.initCRSearch(!0);case 3:this.crs=t.sent;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"boostjp",value:function(){function t(){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.load_impl(["boostjp","site"]),t.next=3,this.initCRSearch(!1);case 3:this.crs=t.sent;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"load_impl",value:function(e){var n=e.join("/");this.log.info("loading ("+n+")"),t("body").addClass("kunai"),this.meta=new y.a(this.log,e,this.onCodeFound.bind(this)),this.log.info("loaded ("+n+")")}},{key:"onCodeFound",value:function(){function t(t){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(e){var n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.serializeInDOM(this.meta.getDOM(y.a.PageKey.codes).get(e.key)),n=this.meta.getDOM(y.a.PageKey.codes,e),n.length){t.next=4;break}throw new g.a("[BUG] the original DOM element for code "+e+" not found",n);case 4:n.addClass("kunai-code"),this.yatas.set(e,new w.a(this.log,this.wand,this.meta.getCode(e))),i=this.meta.getDOM(y.a.PageKey.articleBody).children('h2:contains("例") ~ .yata'),i.length&&i.removeClass("hidden");case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"initUI",value:function(){function t(){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.log.makeContext("UI"),this.ui={treeview:new v.a(e)};case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"initCRSearch",value:function(){function t(t){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(e){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return n=new C.CRSearch,n.database("https://cpprefjp.github.io/static/crsearch/crsearch.json"),n.searchbox(document.getElementsByClassName("crsearch")),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));return t}()}]),e}());x.defaultOptions={compat:!0}}.call(e,n(11))},152:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return s});var i=n(1),a=n.n(i),r=n(3),o=n.n(r),s=function(){function e(n){a()(this,e),this.log=n.makeContext("Compat"),this.log.info("applying..."),window.tree_onclick=function(t){t.stopPropagation()},t(".treespan").on("click",this.onTreeClick.bind(this)),this.log.info("applied.")}return o()(e,[{key:"onTreeClick",value:function(e){e.stopPropagation(),t(e.currentTarget).parent("li").toggleClass("active")}},{key:"onTreeClickOld",value:function(e){var n=t(e.target),i=n.parent("li.parent_li").find(" > ul > li");this.log.debug("onTreeClick (visible: "+i.is(":visible")+", prevented: "+e.isDefaultPrevented()+")",e),i.is(":visible")?(i.hide(100),n.attr("title","Expand this branch").find(" > i").addClass("glyphicon-plus").removeClass("glyphicon-minus")):(i.show(100),n.attr("title","Collapse this branch").find(" > i").addClass("glyphicon-minus").removeClass("glyphicon-plus")),e.stopPropagation()}}]),e}()}).call(e,n(11))},153:function(t,e,n){"use strict";var i=n(154);n.d(e,"a",function(){return i.a})},154:function(t,e,n){"use strict";(function(t){function i(t){return l[t]}n.d(e,"a",function(){return c});var a=n(10),r=n.n(a),o=n(1),s=n.n(o),l={11:"/lang/cpp11.html",14:"/lang/cpp14.html",17:"/lang/cpp17.html",20:"/lang/cpp20.html"},c=function e(n){s()(this,e),this.log=n.makeContext("Treeview"),this.log.info("initialzing...");var a=t('main[role="main"]'),o=a.find(".tree");if(!o.length)return void this.log.error("tree view DOM element not found (.tree)");var l=o.find(".cpp-sidebar"),c=!0,u=!1,h=void 0;try{for(var d,f=r()(l);!(c=(d=f.next()).done);c=!0){var p=d.value,g=t(p),m=g.text().trim().replace(/\(([^)]+)\)/,"$1"),v=g.text().trim().match(/C\+\+[a-zA-Z0-9]+/i),y=null;if(v)switch(v[0]){case"C++11":y=i("11");break;case"C++14":y=i("14");break;case"C++17":y=i("17");break;case"C++20":y=i("20")}y&&g.html(t("<a>").attr("href",y).text(m))}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}this.log.info("initialized.")}}).call(e,n(11))},157:function(t,e,n){"use strict";var i=(n(94),n(158));n.d(e,"a",function(){return i.a})},158:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return j});var i=n(66),a=n.n(i),r=n(25),o=n.n(r),s=n(10),l=n.n(s),c=n(163),u=n.n(c),h=n(44),d=n.n(h),f=n(95),p=n.n(f),g=n(45),m=n.n(g),v=n(67),y=n.n(v),k=n(13),w=n.n(k),b=n(1),_=n.n(b),C=n(3),x=n.n(C),T=n(20),M=n(94),D=n(171),O=n(173),P=n(175),S=n(26),A=n(185),R={gfm:!0,tables:!0},j=function(){function e(t,n,i){_()(this,e),this.log=t.makeContext("Meta",new S.Logger.Option({icon:{text:"☯",color:"#AAA"}})),this.config=n,this.onCodeFound=i,this.last_key=0,this.codes=new P.d(this.log),this.dom=new w.a,this.andareMetaInfo=new w.a;try{this.parseHTML()}catch(t){try{if(!(t instanceof T.a))throw t;var a;(a=this.log).error.apply(a,[t.reason].concat(y()(t.args)))}catch(t){throw t}finally{this.log.error("parse failed")}}}return x()(e,[{key:"onMetaURLFound",value:function(){this.log.info("got meta URL: "+this.original_url,this.original_url),"https:"!=this.original_url.protocol&&(this.log.warn("protocol was not https, force setting to https",this.original_url.protocol),this.original_url.protocol="https:"),this.log.info("original_url: "+this.original_url,this.original_url),this.filename=[].concat(y()(this.original_url.pathname.split("/"))).pop(),this.raw_url=new URL(this.original_url),this.raw_url.host="raw.githubusercontent.com",this.raw_url.pathname=this.raw_url.pathname.replace(new RegExp("^/"+this.reponame()+"/edit/"),"/"+this.reponame()+"/"),this.log.info("raw_url: "+this.raw_url,this.raw_url),this.content_type=O.a.parse(this.raw_url),this.fetchMetaSource()}},{key:"fetchMetaSource",value:function(){function e(){return n.apply(this,arguments)}var n=m()(d.a.mark(function e(){var n=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.time(p()({fetchMetaSource:this.filename})),t.ajax({method:"GET",url:this.raw_url}).done(function(t){console.timeEnd(p()({fetchMetaSource:n.filename})),n.log.info("fetch success",t),console.time(p()({parse:n.filename}));try{n.parse(n.content_type,t)}catch(t){if(!(t instanceof T.a))throw t;var e;(e=n.log).error.apply(e,[t.reason].concat(y()(t.args)))}finally{console.timeEnd(p()({parse:n.filename}))}}).fail(function(t){console.timeEnd(p()({fetchMetaSource:n.filename})),n.log.error(t.name,t.message)});case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"parse",value:function(t,e){this.log.info("parsing markdown file '"+this.filename+"'"),this.parse_impl(t,e),this.log.info("parse success")}},{key:"parse_impl",value:function(t,e){if(t===O.a.MARKDOWN){var n=new A.Lexer(R);this.log.debug("lexer",n),this.tokens=n.lex(e).map(function(t){return new w.a(u()(t))}),this.log.debug("markdown ("+this.tokens.length+" tokens)",this.tokens),this.process(this.tokens)}}},{key:"getCode",value:function(t){if(!this.codes.has(t))throw new T.a("code "+t+" not found in Meta data");return this.codes.get(t)}},{key:"process",value:function(t){this.is_first_list=!0,this.is_inside_example=!1,this.single_bufs=[];var e=this.log.opts.data.ctx.level;this.log.opts.data.ctx.level=S.Logger.Level.info;try{var n=!0,i=!1,a=void 0;try{for(var r,o=l()(t);!(n=(r=o.next()).done);n=!0){var s=r.value;this.process_single(s)}}catch(t){i=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}}finally{this.log.opts.data.ctx.level=e}}},{key:"process_single",value:function(t){switch(this.log.debug("processing token <"+t.get("type")+">",t),t.get("type")){case"heading":this.heading_depth=t.depth,t.get("text").trim().match(/例|Example|Sample|サンプル/i)?this.is_inside_example=!0:this.is_inside_example=!1;break;case"list_item_start":this.single_bufs.push("");break;case"list_item_end":var e=this.single_bufs.pop();if(1===this.heading_depth&&this.is_first_list){var n=e.match(/([^\]]+)\[([^\] ]+) ([^\]]+)\]$/);if(n){this.log.debug("matched: '"+n[0]+"'",e,n);var i=o()(n,4),a=(i[0],i[1]),r=i[2],s=i[3];this.log.debug("matched (detailed): "+a+" "+r+" "+s,a,r,s),"meta"===r&&(this.andareMetaInfo.set(s,a),this.log.info("got meta: '"+s+"' --\x3e '"+a+"'"))}}break;case"list_end":this.is_first_list=!1;break;case"text":this.is_first_list&&(this.single_bufs[this.single_bufs.length-1]+=t.get("text"));break;case"code":try{var l=t.get("lang"),c=t.get("text");if(this.log.info("found a code section (#"+this.last_key+")"),!this.is_inside_example){this.log.info("got a code outside the example section, skipping...",l,c);break}if("cpp"===l){this.log.info("got C++ code (#"+this.last_key+")",c);var u=[this.andareMetaInfo.get("header")].filter(Boolean),h=new P.b("CPP",this.last_key);this.codes.add(new P.a(this.log,h,c,{headers:u})),this.onCodeFound(h)}else this.log.warn("got code for unknown language '"+l+"', skipping...",c)}finally{++this.last_key}}}},{key:"parseHTML",value:function(){this.log.info("parsing html source..."),this.setDOM(D.a.main,null,'main[role="main"]'),this.setDOM(D.a.article,D.a.main,'div[itemtype="http://schema.org/Article"]'),this.setDOM(D.a.articleBody,D.a.article,'div[itemprop="articleBody"]'),this.setDOM(D.a.codes,D.a.articleBody,"> .codehilite, > pre > code");var t=this.getDOM(D.a.article).find(".edit-button .edit");if(!t.length)throw new M.a("could not fetch GitHub source URL");this.original_url=new URL(t.attr("href")),this.onMetaURLFound()}},{key:"setDOM",value:function(e,n,i){this.log.info("fetching '"+a()(e)+"'... [parent: "+(n?"'"+a()(n)+"'":"(none)")+"]");var r=n?this.dom.get(n).find(i):t(i);if(!r)throw new M.a("could not fetch content",e,n,i);this.dom.set(e,r)}},{key:"getDOM",value:function(t,e){return e?this.dom.get(t).filter(function(t,n){var i=null;try{i=P.b.fromDOM(n)}catch(n){if(n instanceof P.c)return!1;throw n}return i.equals(e)}):this.dom.get(t)}},{key:"reponame",value:function(){return this.config.join("/")}}]),e}();j.PageKey=D.a}).call(e,n(11))},171:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(34),a=n.n(i),r={main:a()("main"),article:a()("article"),articleBody:a()("articleBody"),codes:a()("codes")}},173:function(t,e,n){"use strict";var i=n(174);n.d(e,"a",function(){return i.a})},174:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(91),a=n.n(i),r=n(1),o=n.n(r),s=n(3),l=n.n(s),c=function(){function t(){o()(this,t)}return l()(t,null,[{key:"parse",value:function(e){var n=e.pathname.match(/(?:\.[^.]+)+$/),i=t.UNKNOWN;switch(String(n)){case".md":i=t.MARKDOWN}return i}}]),t}();c.UNKNOWN=a()("unknown"),c.MARKDOWN=a()("markdown")},175:function(t,e,n){"use strict";var i=n(68);n.d(e,"c",function(){return i.b}),n.d(e,"b",function(){return i.a});var a=n(176);n.d(e,"d",function(){return a.a});var r=n(177);n.d(e,"a",function(){return r.a})},176:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(13),a=n.n(i),r=n(1),o=n.n(r),s=n(3),l=n.n(s),c=(n(20),n(68),function(){function t(e){o()(this,t),this.log=e.makeContext("Pool"),this.langs=new a.a}return l()(t,[{key:"add",value:function(t){this.langs.has(t.id.lang)||this.langs.set(t.id.lang,new a.a),this.langs.get(t.id.lang).set(t.id.key,t)}},{key:"delete",value:function(t){if(!this.has(t))throw new Error("[BUG] attempt to remove a non existent code ("+t+")");this.langs.get(t.lang).delete(t.key)}},{key:"get",value:function(t){if(!this.has(t))throw new Error("[BUG] attempt to retrieve a non existent code ("+t+")");return this.langs.get(t.lang).get(t.key)}},{key:"has",value:function(t){return!!this.langs.has(t.lang)&&this.langs.get(t.lang).has(t.key)}}]),t}())},177:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(25),a=n.n(i),r=n(10),o=n.n(r),s=n(1),l=n.n(s),c=n(3),u=n.n(c),h=(n(68),n(26)),d=function(){function t(e,n,i,a){l()(this,t),this.id=n,this.log=e.makeContext("CPP #"+this.id.key,new h.Logger.Option({icon:{text:"💻",color:"#2244FF"}})),this.buf=i,this.parse(a)}return u()(t,[{key:"parse",value:function(t){this.headers=[];var e=!0,n=!1,i=void 0;try{for(var r,s=o()(this.buf.split(/\n/));!(e=(r=s.next()).done);e=!0){var l=r.value,c=l.trim(),u=c.match(/^#include\s*<([^>]+)>/);if(u){var h=a()(u,2),d=(h[0],h[1]);this.log.debug("got C++ header '"+d+"' in code"),this.headers.push(d)}}}catch(t){n=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw i}}if(t.headers){var f=!0,p=!1,g=void 0;try{for(var m,v=o()(t.headers);!(f=(m=v.next()).done);f=!0){var y=m.value;this.headers.includes(y)||(this.log.warn("already found header '"+y+"' in meta tag, but it was not written in this code snippet"),this.prepend_header(y),this.headers.push(y))}}catch(t){p=!0,g=t}finally{try{!f&&v.return&&v.return()}finally{if(p)throw g}}}this.log.info("parse ok",this)}},{key:"prepend_header",value:function(t){this.buf="#include <"+t+">\n"+this.buf}}]),t}()},187:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return L});var i=n(67),a=n.n(i),r=n(13),o=n.n(r),s=n(10),l=n.n(s),c=n(25),u=n.n(c),h=n(19),d=n.n(h),f=n(66),p=n.n(f),g=n(95),m=n.n(g),v=n(3),y=n.n(v),k=n(34),w=n.n(k),b=n(41),_=n.n(b),C=n(1),x=n.n(C),T=n(42),M=n.n(T),D=n(43),O=n.n(D),P=n(20),S=n(188),A=n.n(S),R=n(26),j=(function(t){function e(){return x()(this,e),M()(this,(e.__proto__||_()(e)).apply(this,arguments))}O()(e,t)}(P.b),{get:w()("GET"),post:w()("POST")}),E=function(){function e(){x()(this,e)}return y()(e,null,[{key:"compile",value:function(t,n,i,a,r){return e.request(t,j.post,new URL("compile.json",e.Home),n,i,a,r)}},{key:"request",value:function(n,i,a,r,o,s,l){var c=m()({method:p()(i),url:String(a),id:n}),u=Date.now(),h=function(){return{id:n,elapsed:Date.now()-u}},f=function(t){return s(t,h())},g=function(t){return l(t,h())},v={dataType:"json",crossDomain:!0,cache:!1};try{switch(i){case j.get:return t.ajax(String(a),d()({},v,{type:"GET",data:e.make_request_json(r,o)})).done(f).fail(g);case j.post:return t.ajax(String(a),d()({},v,{type:"POST",data:e.make_request_json(r,o)})).done(f).fail(g)}}catch(t){throw console.timeEnd(c),t}}},{key:"make_request_json",value:function(t,e){var n={},i=!0,a=!1,r=void 0;try{for(var o,s=l()(t);!(i=(o=s.next()).done);i=!0){var c=o.value,h=u()(c,2),d=h[0],f=h[1];switch(d){case"compiler":n[d]=f;break;case"options":n[d]=f.join(",");break;case"compiler-option-raw":n[d]=f.join("\n")}}}catch(t){a=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n.code=e,m()(n)}}]),e}();E.Home=new URL("https://wandbox.org/api/");var L=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a;x()(this,t),this.log=e.makeContext("Wand",new R.Logger.Option({icon:{text:"🌭",color:"#CCAA14"}})),this.opts=new o.a([].concat(a()(t.defaults),a()(n))),this.log.info("三へ( へ՞ਊ ՞)へ ﾊｯﾊｯ")}return y()(t,null,[{key:"elapsed",value:function(t){return A()(t/1e3).format("0.0")+" sec"}}]),y()(t,[{key:"compile",value:function(e,n,i){var a=this,r="#"+Date.now();return this.log.info("compiling: "+r,e),E.compile(r,this.opts,e,function(e,i){return a.log.info("success: "+r+" (took "+t.elapsed(i.elapsed)+")",e,i),n(e,i)},function(e,n){return a.log.error("failed: "+r+" (took "+t.elapsed(n.elapsed)+")",e,n),i(e,n)})}}]),t}();L.defaults=new o.a([["compiler","clang-head"],["options",["warning","c++2a","cpp-pedantic-errors"]],["compiler-option-raw",["-Wall","-Wextra"]]])}).call(e,n(11))},189:function(t,e){var n=["3024-day","3024-night","abcdef","ambiance-mobile","ambiance","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","hopscotch","icecoder","isotope","lesser-dark","liquibyte","material","mbo","mdn-like","midnight","monokai","neat","neo","night","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","solarized","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","zenburn"];t.exports=n},190:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={mode:"clike",theme:"paraiso-dark",autofocus:!0,lineNumbers:!0,tabSize:2,indentUnit:2,indentWithTabs:!1,smartIndent:!0,fixedGutter:!0,styleActiveLine:!0,gutters:["CodeMirror-linenumbers","breakpoints"]}},191:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return O});var i=n(44),a=n.n(i),r=n(45),o=n.n(r),s=n(10),l=n.n(s),c=n(13),u=n.n(c),h=n(19),d=n.n(h),f=n(1),p=n.n(f),g=n(3),m=n.n(g),v=n(34),y=n.n(v),k=n(98),w=n(20),b=n(26),_=n(99),C=n.n(_),x=n(192),T=(n.n(x),n(193)),M=n.n(T),D={play:y()("play"),compile:y()("compile"),theme:y()("theme")},O=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p()(this,e),this.wand=n,this.code=i,this.console=null,this.log=t.makeContext("Yata "+this.code.id,new b.Logger.Option({icon:{text:"🐦",color:"#222"}})),this.opts=d()({},k.a,a),this.tools=new u.a,this.themes=new u.a,this.currentTheme=k.a.theme,this.loadTheme(this.currentTheme),this.initElem(),this.initMirror()}return m()(e,[{key:"initElem",value:function(){if(this.orig_code=t(".kunai-code"+this.code.id.makeSelector(!0)),!this.orig_code.length)throw new w.a("original code element with id "+this.code.id+" not found");var e=t("<div />");e.addClass("yata"),e.addClass("hidden"),this.code.id.serializeInDOM(e),this.log.info("creating Yata toolbar for code snippet "+this.code.id,e);var n=t("<div>").addClass("tools-all"),i=t('<div class="tooltip-wrapper"><div class="tooltip"></div></div>'),a=t("<li>").addClass("tool"),r=this.code.id.serializeInDOM(t("<button>")).prop("disabled",!0);i.clone().appendTo(r);var o=t("<ul />").addClass("tools left"),s=a.clone().addClass("play");this.tools.set(D.play,s);var c=r.clone().prop("disabled",!1);t("<i>").addClass("fa fa-fw fa-magic").appendTo(c),c.on("click",this.onEnable.bind(this)),c.appendTo(s),s.appendTo(o);var u=a.clone().addClass("compile");this.tools.set(D.compile,u);var h=r.clone();t("<i>").addClass("fa fa-fw fa-play").appendTo(h),h.on("click",this.onCompile.bind(this)),h.appendTo(u),u.appendTo(o),o.appendTo(n);var d=t("<ul />").addClass("tools right"),f=a.clone().addClass("theme");this.tools.set(D.theme,f);var p=t("<div>").addClass("not-a-button");t("<i>").addClass("fa fa-fw fa-adjust").appendTo(p),i.clone().appendTo(p),p.appendTo(f);var g=t("<select>"),m=!0,v=!1,y=void 0;try{for(var b,_=l()(k.b);!(m=(b=_.next()).done);m=!0){var C=b.value;t("<option>").val(C).text(C).appendTo(g)}}catch(t){v=!0,y=t}finally{try{!m&&_.return&&_.return()}finally{if(v)throw y}}g.val(this.currentTheme),g.on("change",this.onThemeChange.bind(this)),g.appendTo(f),f.appendTo(d),d.appendTo(n),n.appendTo(e),this.orig_code.before(e)}},{key:"initMirror",value:function(e){var n=this;this.buf=this.orig_code.next(".mirror"),this.log.info("creating textarea buffer..."),this.buf=t("<textarea>").addClass("mirror"),this.code.id.serializeInDOM(this.buf),this.buf.text(this.code.buf),this.orig_code.after(this.buf),this.log.info("enabling Yata "+this.code.id,this.buf),this.log.info("creating CodeMirror element..."),this.cm=C.a.fromTextArea(this.buf.get(0),d()({},this.opts,{theme:this.currentTheme})),this.cm.on("gutterClick",function(t,e){var i=t.lineInfo(e);t.setGutterMarker(e,"breakpoints",i.gutterMarkers?null:n.makeMarker())}),this.cm.setSize(null,"380px"),this.log.info("CodeMirror element created",this.cm),this.cm.focus(),this.cmRefresh=setInterval(function(){n.cm.refresh()},250),this.console=t("<div>").addClass("yata-console"),t(this.cm.getWrapperElement()).after(this.console)}},{key:"onResize",value:function(t){return t.stopPropagation(),this.log.info("dragged "+t.offsetY,t),"mousedown"===t.type?(this.isDragging=!1,!1):"mousemove"===t.type?(this.isDragging=!0,!1):void(this.isDragging&&this.log.info("dragged "+t.offsetY,t))}},{key:"makeMarker",value:function(){return t("<div>").text("●").css(e.Style.Marker).get(0)}},{key:"loadTheme",value:function(){function t(t){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.themes.has(e)||(this.log.info("initial theme load for '"+e+"'"),this.themes.set(e,!0));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"findRaw",value:function(){return t(".mirror"+this.code.id.makeSelector()+" + .CodeMirror")}},{key:"onCompile",value:function(t){this.tools.get(D.compile).addClass("compiling"),this.cm.save(),this.wand.compile(this.cm.getTextArea().value,this.onCompileSuccess.bind(this),this.onCompileFailure.bind(this))}},{key:"onCompileSuccess",value:function(){function t(t,n){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(e,n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.onCompilePostPre(!0,e,n),t.abrupt("return",this.onCompilePostPost(e,n));case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"onCompileFailure",value:function(){function t(t,n){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(e,n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.onCompilePostPre(!1,e,n),t.abrupt("return",this.onCompilePostPost(e,n));case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"onCompilePostPre",value:function(t,e,n){}},{key:"onCompilePostPost",value:function(){function t(t,e){return n.apply(this,arguments)}var n=o()(a.a.mark(function t(n,i){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.tools.get(D.compile).removeClass("compiling"),this.console.html([].concat(e.processConsole(n.compiler_message)).concat(e.processConsole(n.program_message)));case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"onThemeChange",value:function(t){var e=t.target.value;this.log.info("onThemeChange (--\x3e '"+e+"')",t),this.loadTheme(e),this.currentTheme=e,this.applyRawThemeChange()}},{key:"applyRawThemeChange",value:function(){function t(){return e.apply(this,arguments)}var e=o()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.findRaw(),e.length&&(this.log.info("mirror found, dynamically changing theme...",e),e.get(0).className=e.get(0).className.split(/\s+/).filter(function(t){return!t.match(/^cm-s-/)}).concat("cm-s-"+this.currentTheme).join(" "));case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"onEnable",value:function(e){var n=t(e.srcElement||e.originalTarget||e.target),i=n.closest(".yata"),a=t(i.nextAll(".codehilite"+this.code.id.makeSelector()));if(i.hasClass("enabled")){this.log.info("disabling Yata mode");var r=a.next(".mirror");r.length&&r.removeClass("enabled");var o=i.find(".tools-all .tool"),s=!0,c=!1,u=void 0;try{for(var h,d=l()(o);!(s=(h=d.next()).done);s=!0){var f=h.value,p=t(f);p.hasClass("play")||p.find("button").prop("disabled",!0)}}catch(t){c=!0,u=t}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}return void i.removeClass("enabled")}i.addClass("enabled"),this.log.info("enabling Yata mode");var g=i.find(".tools-all .tool"),m=!0,v=!1,y=void 0;try{for(var k,w=l()(g);!(m=(k=w.next()).done);m=!0){var b=k.value,_=t(b),C=_.find("button");C.length&&C.prop("disabled",!1)}}catch(t){v=!0,y=t}finally{try{!m&&w.return&&w.return()}finally{if(v)throw y}}this.buf.addClass("enabled")}}],[{key:"processConsole",value:function(e){return e?t("<span />").text(e).html().split(/\n/).map(function(e){return t("<p>").addClass("yata-console-line").html(M.a.ansiToHtml(e,{use_classes:!0}))}):[]}}]),e}();O.ToolID=D,O.Style={Marker:{color:"#ff2727"}}}).call(e,n(11))},194:function(t,e,n){var i={};!function(t){t.keys().forEach(function(e){return i[e]=t(e)})}(n(195))},20:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return d});var i=n(41),a=n.n(i),r=n(42),o=n.n(r),s=n(43),l=n.n(s),c=n(1),u=n.n(c),h=function t(e){u()(this,t),this.reason=e;for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.args=i},d=(function(t){function e(){return u()(this,e),o()(this,(e.__proto__||a()(e)).apply(this,arguments))}l()(e,t)}(h),function(t){function e(){return u()(this,e),o()(this,(e.__proto__||a()(e)).apply(this,arguments))}return l()(e,t),e}(h))},68:function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return p}),n.d(e,"a",function(){return g});var i=n(3),a=n.n(i),r=n(41),o=n.n(r),s=n(1),l=n.n(s),c=n(42),u=n.n(c),h=n(43),d=n.n(h),f=n(20),p=function(t){function e(){return l()(this,e),u()(this,(e.__proto__||o()(e)).apply(this,arguments))}return d()(e,t),e}(f.a),g=function(){function e(t,n){l()(this,e),this.lang=String(t),this.key=n}return a()(e,[{key:"equals",value:function(t){if(!(t instanceof e))throw new Error("rhs must be instanceof ID",t);return this.lang===t.lang&&this.key===t.key}},{key:"toString",value:function(){return"#"+this.lang+"-"+this.key}},{key:"serialize",value:function(){return this.lang+"-"+this.key}},{key:"makeSelector",value:function(){return"["+e.DataAttr+'="'+this.serialize()+'"]'}},{key:"serializeInDOM",value:function(n){return t(n).attr(e.DataAttr,this.serialize())}}],[{key:"fromDOM",value:function(n){var i=t(n).attr(e.DataAttr);if(!i||!i.length)throw new p("specified dom element does not have yata key '"+e.DataAttr+"'",n);var a=i.match(e.R);if(!a)throw Error("unrecognized code id format '"+i+"'",n);return new e(a[1],parseInt(a[2]))}}]),e}();g.DataAttr="data-kunai-yata-id",g.R=/([a-zA-Z][a-zA-Z0-9_]+)-(\d+)/}).call(e,n(11))},94:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(41),a=n.n(i),r=n(1),o=n.n(r),s=n(42),l=n.n(s),c=n(43),u=n.n(c),h=n(20),d=function(t){function e(){return o()(this,e),l()(this,(e.__proto__||a()(e)).apply(this,arguments))}return u()(e,t),e}(h.a)},98:function(t,e,n){"use strict";var i=n(189),a=n.n(i);n.d(e,"b",function(){return a.a});var r=n(190);n.d(e,"a",function(){return r.a})}},[103]).Kunai;