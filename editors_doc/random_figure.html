<h1>乱数分布の図を作る方法</h1>
<p><a href="http://cpprefjp.github.io/reference/random.html"><code><span style="color: #000">&lt;random&gt;</span></code></a>ライブラリには、数多くの分布法に関するクラスが用意されています。その分布を可視化するために、それらのクラス概要ページには図を入れています。<br />
ここでは、その図を作る方法を紹介します。</p>
<p>一様整数分布を行う<a href="http://cpprefjp.github.io/reference/random/uniform_int_distribution.html"><code><span style="color: #000">std::uniform_int_distribution</span></code></a>クラスを例にします。</p>
<h2>分布クラスのサンプルコード</h2>
<p>分布クラスのサンプルコードは、生成された乱数の値を、TSV(タブ区切り)テキストとして出力する形にします。<code><span style="color: #000">std::uniform_int_distribution</span></code>のサンプルコードは、例として以下のようになっています。</p>
<p><pre class="codehilite"><code class="language-cpp"><span style="color: #000">#include &lt;random&gt;
#include &lt;fstream&gt;

int main() 
{
  std::random_device seed_gen;
  std::default_random_engine engine(seed_gen());

  // 0以上9以下の値を等確率で発生させる
  std::uniform_int_distribution&lt;&gt; dist(0, 9);

  std::ofstream result_file("uniform_int_distribution.tsv");
  for (size_t n = 0; n &lt; 1000; ++n) {
    // 一様整数分布で乱数を生成する
    int result = dist(engine);

    result_file &lt;&lt; result &lt;&lt; "\t\n";
  }
}</span></code></pre>

これを出力すると、以下のようなファイル(uniform_int_distribution.tsv)が生成されます。</p>
<p><pre><code><span style="color: #000">7
5
1
6
6
6
2
0
8
8
9
1
1
9
…
</span></code></pre>
作成されたファイルは、どこかにとっておきます(後ほど、cpprefjp/imageリポジトリに登録してください)。</p>
<h2>ツールのインストール</h2>
<p>図の作成には、R(またはR言語と呼ばれる)というツールを使用します。  </p>
<p>公式サイト： http://www.r-project.org/</p>
<p>各種環境向けにインストーラが提供されているので、公式サイトからダウンロードして、ご自分の環境にインストールしてください。</p>
<h2>図の作成</h2>
<p>Rは、GUIツールを使用しての図の作成はもちろん、Rスクリプトを使用してコマンドラインでも図を作成できます。<br />
今回は、自動化のためにRスクリプトの方法を主に紹介します。  </p>
<p>以下のRスクリプトを、「random_stats.R」という名前でファイルに保存してください。</p>
<p><pre><code><span style="color: #000"># 乱数の分布クラスを使用した結果の出力を、図に変換するRスクリプト

# png形式で出力する
png("uniform_int_distribution.png")

# TSV形式になっている乱数の出力データを読み込む
x &lt;- read.table("uniform_int_distribution.tsv")

# 1列目だけを抜き出す
value = x$V1

# 以下、データの特性に合わせて、ヒストグラムかプロットかを選択してください。

# ヒストグラムとして出力
# hist(value)

# プロットとして出力
plot(value)
</span></code></pre>
出力する画像ファイル名と、入力のtsvファイル名を、分布クラスの名前に合わせて修正してください。<br />
そして、コマンドラインで以下のコマンドを実行してください。</p>
<p><pre><code><span style="color: #000">rscript random_stats.R
</span></code></pre>
これで、<code><span style="color: #000">png()</span></code>関数で指定された画像ファイル名で、図が出力されます。<br />
<code><span style="color: #000">std::uniform_int_distribution</span></code>クラスのサンプルコードでは、以下のような図が得られました。</p>
<p><img alt="" src="https://raw.github.com/cpprefjp/image/master/reference/random/uniform_int_distribution/uniform_int_distribution.png" /></p>
<p>この図は「プロット」と呼ばれる種類の図ですが、そのほか「ヒストグラム」等、いろいろな種類の図を出力できます。先ほどのrandom_stats.Rスクリプトに、ヒストグラムの図出力をコメントアウトしてあるので、分布クラスの特性に合わせて、図の種類を使い分けてください。</p>
<h2>参考</h2>
<ul>
<li><a href="http://cse.naro.affrc.go.jp/takezawa/r-tips/r/48.html" target="_blank">とりあえずプロットする方法</a></li>
<li><a href="http://cse.naro.affrc.go.jp/takezawa/r-tips/r/61.html" target="_blank">ヒストグラムをプロットする方法</a></li>
</ul>
<h2>数式エディタ</h2>
<p><a href="http://www.sciweavers.org/free-online-latex-equation-editor" target="_blank">Online Latex Equation Editor - Sciweavers</a></p>
<footer><a href="https://github.com/cpprefjp/site/edit/master/editors_doc/random_figure.md" target="_blank">編集</a></footer>